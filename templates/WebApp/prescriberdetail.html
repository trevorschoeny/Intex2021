{% extends 'base.html'%}
{% load static %}
{% load custom_tags %}
{% block content %}
<!-- Page Content-->
<section class="py-5">
    <div class="container pt-5">
        <a class="btn btn-primary btn-lg px-4 me-sm-3" href="{% url 'prescribers' %}">Back</a>
    </div>
    <div class="text-center mb-5">
        <h1 class="fw-bolder">{{ prescriber.fname }} {{ prescriber.lname }}</h1>
        <p class="lead fw-normal text-muted mb-0">Provider</p>
    </div>
    <div class="card" >
        <ul class="list-group list-group-flush">

            <!-- Gender -->
            <li class="list-group-item"><p class="text-muted" style="display:inline">Gender: </p>{{ prescriber.gender }}</li>

            <!-- State -->
            <li class="list-group-item"><p class="text-muted" style="display:inline">State: </p>{{ prescriber.state }}</li>

            <!-- Credentials -->
            <li class="list-group-item"><p class="text-muted" style="display:inline">Credentials: </p>{{ prescriber.credential }}</li>

            <!-- Specialists -->
            {% if prescriber.specialties.all.count > 1 %}
                <li class="list-group-item"><p class="text-muted" style="display:inline">Specialties: </p>
            {% else %}
                <li class="list-group-item"><p class="text-muted" style="display:inline">Specialty: </p>
            {% endif %}
                {% for specialty in prescriber.specialties.all %}
                    {% if forloop.counter < prescriber.specialties.all.count %}
                        {{ specialty.title }},
                    {% else %}
                        {{ specialty.title }}
                    {% endif %}
                {% endfor %}
            </li>

            <!-- Licensed -->
            <li class="list-group-item"><p class="text-muted" style="display:inline">Licensed to prescribe opioid: </p>{{ prescriber.isopioidprescriber }}</li>

            <!-- Prescribed Opioids -->
            <li class="list-group-item"><p class="text-muted" style="display:inline">Has presribed opioid?: </p>{{ prescriber.opioidprescribe }}</li>

            <!-- Total Prescriptions -->
            <li class="list-group-item"><p class="text-muted" style="display:inline">Total prescriptions: </p>{{ prescriber.totalprescriptions }}</li>
            <li class="list-group-item"><p class="text-muted" style="display:inline">Total prescriptions: </p>{{ total_prescriptions }}</li>

            <!-- Drugs -->
            {% if prescriber.drugs.all.count > 1 %}
                <li class="list-group-item"><p class="text-muted" style="display:inline">Drugs Prescribed: </p>
            {% else %}
                <li class="list-group-item"><p class="text-muted" style="display:inline">Drug Prescribed: </p>
            {% endif %}

                {% for drug in prescriber.pdprescriberdrugs_set.all %}
                    {% if forloop.counter < prescriber.drugs.all.count %}
                        {{ prescriber.drugs.all|returnindex:forloop.counter0|title }} ({{ drug.qty }}),
                    {% else %}
                        {{ prescriber.drugs.all|returnindex:forloop.counter0|title }} ({{ drug.qty }})
                    {% endif %}
                {% endfor %}
            </li>
        </ul>
    </div>
</section>
{% endblock %}